"use strict";var themes=require("../themes"),tools=require("../tools"),_=require("lodash"),chalk=require("chalk"),needle=require("needle"),noon=require("noon"),CFILE=process.env.HOME+"/.leximaven.noon";exports.command="acronym <acronym>",exports.desc="Acronyms",exports.builder={out:{alias:"o",desc:"Write cson, json, noon, plist, yaml, xml","default":"",type:"string"},force:{alias:"f",desc:"Force overwriting outfile","default":!1,type:"boolean"}},exports.handler=function(e){tools.checkConfig(CFILE);var o=noon.load(CFILE),r=themes.loadTheme(o.theme);o.verbose&&themes.labelDown("Acronyms",r,null);var n=e.acronym.toUpperCase(),t="http://acronyms.silmaril.ie/cgi-bin/xaa?"+e.acronym,s={type:"acronym",source:"http://acronyms.silmaril.ie"},a=_.get(chalk,r.content.style);needle.get(t,function(o,r){if(o||200!==r.statusCode)console.error(chalk.red.bold("HTTP "+r.statusCode+":")+" "+chalk.red(o));else{var t=r.body;if("0"===t.acronym.found.$.n)console.log(a("Found 0 acronyms for "+n+"."));else{var l=t.acronym.found;console.log(a("Found "+l.$.n+" acronyms for "+n+":"));for(var c=l.acro,m=0;m<=c.length-1;m++){var i=c[m];if(process.stdout.write(a(""+i.expan)),s[["expansion"+m]]=i.expan,""!==i.comment)if(i.comment.a){var d=i.comment.a;process.stdout.write(a(" - "+d._+" - "+d.$.href)),s[["comment"+m]]=d._,s[["url"+m]]=d.$.href}else process.stdout.write(a(" - "+i.comment)),s[["comment"+m]]=i.comment;console.log(a(" - DDC: "+i.$.dewey)),s[["DDC"+m]]=i.$.dewey}e.o&&tools.outFile(e.o,e.f,s)}}})};